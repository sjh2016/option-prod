(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54018d92"],{"386d":function(e,t,n){"use strict";var a=n("cb7c"),i=n("83a1"),r=n("5f1b");n("214f")("search",1,(function(e,t,n,l){return[function(n){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=l(n,e,this);if(t.done)return t.value;var o=a(e),s=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var u=r(o,s);return i(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},"3c9c":function(e,t,n){"use strict";n("83c4")},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"83c4":function(e,t,n){},efaa:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("el-row",[n("div",{staticClass:"table-head table-search"},[n("el-col",{attrs:{lg:4,md:4,xs:6}},[n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:e.add}},[e._v("添加客服")])],1),e._v(" "),n("el-col",{attrs:{lg:20,md:20,xs:18}},[n("el-row",{attrs:{gutter:6,type:"flex",align:"middle",justify:"end"}},[n("span",[e._v("客服类型")]),e._v(" "),n("el-select",{attrs:{size:"small",placeholder:"TG/Whatsapp"},on:{change:e.search},model:{value:e.param.type,callback:function(t){e.$set(e.param,"type",t)},expression:"param.type"}},e._l(e.options,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.type}})})),1),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[n("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)],1)],1)]),e._v(" "),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.tableData,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"客服昵称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"客服类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s("Telegram"==t.row.type?"Telegram":"WhatsApp"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"客服链接",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.link))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.changeEnable(t.row)}},model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.edit(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.showEdit},on:{"update:visible":function(t){e.showEdit=t},closed:e.dialogClose}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"客服昵称"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"客服类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.optionSelect,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.type}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"客服链接"}},[n("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否启用"}},[n("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1)],1)],1)},i=[],r=(n("96cf"),n("3b8d")),l=(n("386d"),n("456d"),n("ac6a"),n("db72")),o=n("2f62"),s={data:function(){return{loading:!1,showEdit:!1,isLoading:!1,total:0,brokerData:[],tableData:[],param:{page:1,size:20},options:[{id:0,name:"全部",type:""},{id:1,name:"Telegram",type:"Telegram"},{id:2,name:"WhatsApp",type:"WhatsApp"}],form:{id:"",name:"",link:"",type:"Telegram",enable:!0}}},computed:{optionSelect:function(){return this.options.filter((function(e){return 0!=e.id}))}},mounted:function(){this.getList()},methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])("system",{queryService:"queryService",create:"createService",update:"modifyService",delete:"deleteService"})),{},{getList:function(){var e=this;this.isLoading=!0,this.queryService().then((function(t){t&&0==t.code&&(e.tableData=t.data||[]),e.isLoading=!1})).catch((function(t){e.tableData=[],e.isLoading=!1}))},handleCurrentChange:function(e){this.param.page=e,this.getList()},handleSizeChange:function(e){this.param.size=e,this.getList()},search:function(){this.param.page=1,this.getList()},changeEnable:function(e){var t=this;Object.keys(this.form).forEach((function(n){t.form[n]=e[n]})),this.onSubmit()},initForm:function(){var e=this;Object.keys(this.form).forEach((function(t){e.form[t]="type"==t?"Telegram":"enable"==t||""})),this.form.id=""},add:function(){this.showEdit=!0},edit:function(e){var t=this;this.showEdit=!0,Object.keys(this.form).forEach((function(n){t.form[n]=e[n]}))},del:function(e){var t=this,n=e.id;this.delete({id:n}).then((function(e){t.search()}))},dialogClose:function(){this.showEdit=!1,this.initForm()},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,!this.form.id){e.next=7;break}return e.next=4,this.update(this.form);case 4:t=e.sent,e.next=11;break;case 7:return delete this.form.id,e.next=10,this.create(this.form);case 10:t=e.sent;case 11:0==t.code&&(this.dialogClose(),this.search());case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},c=s,u=(n("3c9c"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"f23e0248",null);t["default"]=d.exports}}]);