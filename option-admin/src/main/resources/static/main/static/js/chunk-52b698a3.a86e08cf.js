(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52b698a3"],{"386d":function(e,t,a){"use strict";var n=a("cb7c"),i=a("83a1"),r=a("5f1b");a("214f")("search",1,(function(e,t,a,o){return[function(a){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=o(a,e,this);if(t.done)return t.value;var l=n(e),s=String(this),c=l.lastIndex;i(c,0)||(l.lastIndex=0);var u=r(l,s);return i(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},"389a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("el-row",[a("div",{staticClass:"table-head table-search"},[a("el-col",{attrs:{lg:4,md:6,xs:6}},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:e.add}},[e._v("添加排行榜")])],1),e._v(" "),a("el-col",{attrs:{lg:20,md:18,xs:20}},[a("el-row",{attrs:{gutter:6,type:"flex",align:"middle",justify:"end"}},[a("span",[e._v("客服排行榜")]),e._v(" "),a("el-col",{attrs:{lg:3,md:8,xs:12}},[a("el-select",{attrs:{size:"small",placeholder:"TG/Whatsapp"},on:{change:e.search},model:{value:e.param.type,callback:function(t){e.$set(e.param,"type",t)},expression:"param.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.type}})})),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)],1)],1)]),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.tableData,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("thrityDay"==t.row.type?"30日":"昨日"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"邀请人数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.inviteNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总收益",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.income))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总投资 ",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-pagination",{staticClass:"ygw-fenye",attrs:{background:"","current-page":e.param.page,"page-size":e.param.size,layout:"total,sizes,prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.param,"page",t)},"update:current-page":function(t){return e.$set(e.param,"page",t)}}}),e._v(" "),a("el-dialog",{attrs:{visible:e.showEdit},on:{"update:visible":function(t){e.showEdit=t},closed:e.dialogClose}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户头像"}},[a("el-upload",{attrs:{accept:"image/*",action:"","show-file-list":!1,"http-request":e.uploadFile,"on-remove":e.handleRemove,"on-error":e.handleError,"before-upload":e.beforeUpload}},[e.form.headImg?a("img",{staticClass:"avatar",attrs:{src:this.baseImgUrl+e.form.headImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.optionSelect,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人数"}},[a("el-input",{model:{value:e.form.inviteNumber,callback:function(t){e.$set(e.form,"inviteNumber",t)},expression:"form.inviteNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总收益"}},[a("el-input",{model:{value:e.form.income,callback:function(t){e.$set(e.form,"income",t)},expression:"form.income"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总投资"}},[a("el-input",{model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.dialogClose}},[e._v("取消")])],1)],1)],1)],1)},i=[],r=(a("6762"),a("96cf"),a("3b8d")),o=(a("386d"),a("456d"),a("ac6a"),a("c5f6"),a("db72")),l=a("2f62"),s={data:function(){return{loading:!1,showEdit:!1,isLoading:!1,total:0,brokerData:[],tableData:[],param:{type:"",page:1,size:20},options:[{id:0,name:"全部",type:""},{id:1,name:"昨日",type:"yesterday"},{id:2,name:"30日",type:"thrityDay"}],form:{id:"",name:"",amount:0,income:0,headImg:"",inviteNumber:0,type:"yesterday"},dialogImageUrl:"",dialogVisible:!1,headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.getItem("token")}}},computed:Object(o["a"])(Object(o["a"])({},Object(l["c"])({baseImgUrl:"system/baseImgUrl"})),{},{optionSelect:function(){return this.options.filter((function(e){return 0!=e.id}))}}),mounted:function(){this.getList()},methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])("system",{queryRank:"queryRank",create:"createRank",update:"modifyRank",delete:"deleteRank",upload:"upload"})),{},{getList:function(){var e=this;this.isLoading=!0,this.queryRank(this.param).then((function(t){console.log(t),t&&0==t.code&&(e.tableData=t.data.records||[],e.total=Number(t.data.total)),e.isLoading=!1})).catch((function(t){e.tableData=[],e.isLoading=!1}))},handleCurrentChange:function(e){this.param.page=e,this.getList()},handleSizeChange:function(e){this.param.size=e,this.getList()},search:function(){this.param.page=1,this.getList()},initForm:function(){var e=this;Object.keys(this.form).forEach((function(t){e.form[t]="type"==t?"Telegram":"enable"==t||""}))},add:function(){this.showEdit=!0},edit:function(e){var t=this;this.showEdit=!0,Object.keys(this.form).forEach((function(a){t.form[a]=e[a]}))},del:function(e){var t=this,a=e.id;this.delete({id:a}).then((function(e){t.search()}))},dialogClose:function(){this.showEdit=!1,this.initForm()},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,!this.form.id){e.next=7;break}return e.next=4,this.update(this.form);case 4:t=e.sent,e.next=11;break;case 7:return delete this.form.id,e.next=10,this.create(this.form);case 10:t=e.sent;case 11:0==t.code&&(this.dialogClose(),this.search());case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(e){var t=this,a={file:e.file,folder:"file"};this.upload(a).then((function(e){0==e.code&&(t.form.headImg=e.data)}))},beforeUpload:function(e){var t=["image/jpeg","image/pjpeg","image/png"];if(!t.includes(e.type))return this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),!1;var a=e.size/1024/1024<2;return!!a||(this.$message.error("上传头像图片大小不能超过 2MB!"),!1)},handleRemove:function(e,t){console.log(t),this.form.headImg=null},handleError:function(e,t,a){200!==e.code&&this.$message({message:e.message||"上传失败",type:"warning"})}})},c=s,u=(a("f2a7"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"30184cee",null);t["default"]=d.exports},"3fdb":function(e,t,a){},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},f2a7:function(e,t,a){"use strict";a("3fdb")}}]);